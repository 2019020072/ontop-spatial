<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE OBDA [
   <!ENTITY dc 'http://purl.org/dc/elements/1.1/'>
   <!ENTITY swrl 'http://www.w3.org/2003/11/swrl#'>
   <!ENTITY dctype 'http://purl.org/dc/dcmitype/Image'>
   <!ENTITY foaf 'http://xmlns.com/foaf/0.1/'>
   <!ENTITY swrlb 'http://www.w3.org/2003/11/swrlb#'>
   <!ENTITY dcterms 'http://purl.org/dc/terms/'>
]>
<OBDA version="1.0" xml:base="http://www.mgdis.fr/ontologies/2011/4/Ontology1305807661637.owl#" xmlns="http://www.mgdis.fr/ontologies/2011/4/Ontology1305807661637.owl#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dctype="http://purl.org/dc/dcmitype/Image" xmlns:foaf="http://xmlns.com/foaf/0.1/" xmlns:owl="http://www.w3.org/2002/07/owl#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:swrl="http://www.w3.org/2003/11/swrl#" xmlns:swrlb="http://www.w3.org/2003/11/swrlb#" xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
  <mappings body="class it.unibz.krdb.obda.model.impl.SQLQueryImpl" headclass="class it.unibz.krdb.obda.model.impl.CQIEImpl" sourceuri="CORIOLIS-CRAQ">
    <mapping id="Mandat">
      <CQ string="Mandat(mandat($payeid)),aPourId(mandat($payeid),$payeid),Montant(montantMandat($montantid)),aPourMontantDecimal(montantMandat($montantid),$montantdecimal),aPourMontant(mandat($payeid),montantMandat($montantid)),aPourType(montantMandat($montantid),type($TypeMontant)),aPourMode(montantMandat($montantid),mode($ModeMontant)),UniteTemporelle(utMandat($montantid)),aPourUniteTemporelle(montantMandat($montantid),utMandat($montantid)),aPourDepart(utMandat($montantid),$anneedepart),aPourArrivee(utMandat($montantid),$anneeArrivee),aPourDuree(utMandat($montantid),$Duree)"/>
      <SQLQuery string="select distinct ( C.BUDGEXE || '_-_' || C.CNEGNUM || '_-_' || C.CNDGLIG ) payeid, ( C.BUDGEXE || '_-_' || C.CNEGNUM || '_-_' || C.CNDGLIG ||'-TypeDepense-ModeTotal') montantid,  C.CNDGMONTTC  montantdecimal, &quot;TypeDepense&quot; typemontant, &quot;ModeTotal&quot; modemontant, C.CNDGDATREC datemontant from cndg C "/>
    </mapping>
    <mapping id="Mandat solde OperationPhysique">
      <CQ string="solde(mandat($payeid),ope($opeid))"/>
      <SQLQuery string="select distinct ( C.BUDGEXE || '_-_' || C.CNEGNUM || '_-_' || C.CNDGLIG ) payeid, O.OPEGCODIF opeid from cndg C, OPEG O  where C.COLLCOD=O.COLLCOD and C.OPEGANN=O.OPEGANN and C.OPEGCOD=O.OPEGCOD and C.OPEGNUM=O.OPEGNUM"/>
    </mapping>
  </mappings>
  <mappings body="class it.unibz.krdb.obda.model.impl.SQLQueryImpl" headclass="class it.unibz.krdb.obda.model.impl.CQIEImpl" sourceuri="PROGOS-CRAQ">
    <mapping id="OperationPhysique">
      <CQ string="OperationPhysique(ope($opeid)),aPourID(ope($opeid),$opeid),aPourLibelle(ope($opeid),$libelle),aPourMontant(ope($opeid),montantOpe($montantid)),Montant(montantOpe($montantid)),aPourMontantDecimal(montantOpe($montantid),$montantdecimal),aPourMontant(ope($opeid),montantOpe($montantid)),aPourType(montantOpe($montantid),type($TypeMontant)),aPourMode(montantOpe($montantid),mode($ModeMontant)),UniteTemporelle(utOpe($montantid)),aPourUniteTemporelle(montantOpe($montantid),utOpe($montantid)),aPourDepart(utOpe($montantid),$anneedepart),aPourArrivee(utOpe($montantid),$anneeArrivee),aPourDuree(utOpe($montantid),$Duree)"/>
      <SQLQuery string="select iddoss opeid, LBDOSS libelle, (iddoss ||'-Typedepense-ModePrevision') montantid, mtprevttc  montantdecimal, &quot;Typedepense&quot; typemontant, &quot;ModePrevision&quot; ModeMontant, ANCREAT anneedepart, &quot;&quot; anneearrive, &quot;0&quot; duree  from domope "/>
    </mapping>
  </mappings>
  <dataSource URI="PROGOS-CRAQ" databaseDriver="oracle.jdbc.driver.OracleDriver" databasePassword="CRAQ_SUV_T0" databaseURL="jdbc:oracle:thin:@craqenvt:1521:CRAQ" databaseUsername="CRAQ_SUV_T0" isAboxDump="" ontouri="http://www.mgdis.fr/ontologies/2011/4/Ontology1305807661637.owl#"/>
  <dataSource URI="CORIOLIS-CRAQ" databaseDriver="oracle.jdbc.driver.OracleDriver" databasePassword="CORIOLIS430" databaseURL="jdbc:oracle:thin:@172.16.1.144:1521:CORIO" databaseUsername="CORIOLIS430" isAboxDump="" ontouri=""/>
  <SavedQueries>
    <QueryGroup id="Operations">
      <Query id="rdf:Type" text="PREFIX ope: &lt;http://www.mgdis.fr/ontologies/2011/4/Ontology1305807661637.owl#>&#xa;PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#>&#xa;&#xa;select ?x ?y where { ?x rdf:type ope:OperationPhysique.&#xa;&#x9;&#x9;?x ope:aPourLibelle ?y.}"/>
      <Query id="Mandat finance Ope 2" text="PREFIX ope: &lt;http://www.mgdis.fr/ontologies/2011/4/Ontology1305807661637.owl#>&#xa;PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#>&#xa;&#xa;select ?x ?y ?z where { ?x rdf:type ope:OperationPhysique.&#xa;&#x9;&#x9;?x ope:aPourLibelle ?y.&#xa;&#x9;&#x9;?z ope:financeOpe ?x.&#xa;}"/>
    </QueryGroup>
  </SavedQueries>
</OBDA>
